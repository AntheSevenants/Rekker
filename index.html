<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Rekker</title>
        <!-- Webfonts -->
        <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
        <!-- Basic style sheet -->
        <link type="text/css" rel="stylesheet" href="css/rekker.css"></style>
        <link type="text/css" rel="stylesheet" href="css/ochre.css"></style>
        <!-- Popper -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

        <!-- statistics.js -->
        <script src="lib/statistics.min.js" type="text/javascript"></script>

        <!-- D3 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.4.0/d3.min.js" integrity="sha512-Z6ftZ637mRkU1XO362ackPirSbbU3AAf/Lg4lVkBzYn9vXMqpgrgFdKM+LFjDVnOC953ILKFR/nXP0bZBxV78Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-selection/0.4.10/selection.min.js" integrity="sha512-e8tpa1iOCgnmhdvAHnNWU3ok6I2RzA8RBy8+D3MUbsjxdTeIYta5DYhAn0D7NpXROnEDacSSKXzFIM0za+LOZw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-scale/0.0.2/scale.min.js" integrity="sha512-HOtWGm6GyVYyQQdtgTHm+lP2oQOxyMbyQIxm0aGjv4jeZB9VSoFlHInwbAHN8S03Tgktmlc6MCosg4Bne6v5RQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- Rekker-specific classes -->
        <script src="js/Constants.js"></script>
        <script src="js/Color.js"></script>
        <script src="js/ItemSelection.js"></script>
        <script src="js/SelectionStats.js"></script>
        <script src="js/Popover.js"></script>
        <script src="js/AxisModes.js"></script>
        <script src="js/ColorCodings.js"></script>
        <script src="js/DispersionMeasures.js"></script>
        <script src="js/PullEffectComponent.js"></script>
        <script src="js/TopNComponent.js"></script>
        <script src="js/ChartModes.js"></script>
        <script src="js/Helpers.js"></script>
        <script src="js/DotPlot.js"></script>
        <script src="js/DataSource.js"></script>
        <script src="js/MetaInfo.js"></script>
        <script src="js/ModelInfoPane.js"></script>
        <script src="js/PaneOtherCoefficients.js"></script>
        <script src="js/Rekker.js"></script>

        <!-- Favicon related resources -->
        <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="194x194" href="img/favicon-194x194.png">
        <link rel="icon" type="image/png" sizes="192x192" href="img/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
        <link rel="manifest" href="img/site.webmanifest">
        <link rel="mask-icon" href="img/safari-pinned-tab.svg" color="#212529">
        <link rel="shortcut icon" href="img/favicon.ico">
        <meta name="msapplication-TileColor" content="#212529">
        <meta name="msapplication-config" content="img/browserconfig.xml">
        <meta name="theme-color" content="#212529">
        </head>
        <body>
            <main class="d-flex flex-nowrap">
                <div class="d-flex flex-column flex-shrink-0 p-3 sidebar">
                    <a href="./" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                        <img class="bi pe-none me-2" width="32" height="32" src="img/rubber-bands.png" alt="Rubber-bands icons created by Freepik - Flaticon">
                        <span class="fs-4">Rekker</span>
                    </a>
                    <div>
                        <hr>
                    </div>
                    <ul class="nav nav-pills mb-3 justify-content-center" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                          <button title="Axes" class="nav-link active" id="pills-axes-tab" data-bs-toggle="pill" data-bs-target="#pills-axes" type="button" role="tab" aria-controls="pills-axes" aria-selected="true"><i class="bi bi-graph-up"></i></button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button title="Data point coding" class="nav-link" id="pills-coding-tab" data-bs-toggle="pill" data-bs-target="#pills-coding" type="button" role="tab" aria-controls="pills-coding" aria-selected="false"><i class="bi bi-brush"></i></button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button title="Selection" class="nav-link" id="pills-selection-tab" data-bs-toggle="pill" data-bs-target="#pills-selection" type="button" role="tab" aria-controls="pills-selection" aria-selected="false"><i class="bi bi-list-check"></i></button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button title="Meta information" class="nav-link" id="pills-info-tab" data-bs-toggle="pill" data-bs-target="#pills-info" type="button" role="tab" aria-controls="pills-info" aria-selected="false"><i class="bi bi-info-circle"></i></button>
                        </li>
                    </ul>
                    <div class="flex-column mb-auto">
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane show active" id="pills-axes" role="tabpanel" aria-labelledby="pills-axes-tab" tabindex="0">
                                <div class="card mb-3">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-graph-up"></i></div> Axes</div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_view" id="radio_view_coefficients" checked>
                                            <label class="form-check-label" for="radio_view_coefficients">Coefficients only</label>
                                        </div>
                                    </div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_view" id="radio_view_external">
                                            <label class="form-check-label" for="radio_view_external">Coefficients + external data</label>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-floating">
                                            <select class="form-select mb-2" aria-label="Dropdown external variable selection" id="select_external" disabled>
                                            
                                            </select>
                                            <label for="select_external">Y-axis:</label>
                                        </div>
                                    </div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_view" id="radio_view_external_only">
                                            <label class="form-check-label" for="radio_view_external_only">External data only</label>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-floating">
                                            <select class="form-select mb-2" aria-label="Dropdown external two-dimensional variable selection"
                                                    id="select_external_2D" disabled>
                                            
                                            </select>
                                            <label for="select_external_2D">Reduction technique:</label>
                                        </div>
                                        <div class="form-floating">
                                            <select class="form-select mb-2" aria-label="Dropdown clustering selection"
                                                    id="select_clustering" disabled>
                                            
                                            </select>
                                            <label for="select_clustering">Clustering:</label>
                                        </div>
                                        <div class="form-check form-switch text-white mb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_enable_heatmap" disabled>
                                            <label class="form-check-label" for="checkbox_enable_heatmap">Enable heatmap</label>
                                        </div>
                                        <div class="text-white">
                                            <label for="input_heatmap_data" class="btn btn-light btn-sm" style="width: 100%;" id="label_heatmap_data"><div class="wrapper"><i class="bi bi-map"></i></div> Load heatmap data</label>
                                            <input accept=".csv" class="form-control form-control-sm" type="file" id="input_heatmap_data" style="display: none;">
                                        </div>
                                    </div>
                                </div>
                                <div class="card mb-3">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-123"></i></div> Regression set-up</div>
                                    <div class="card-body">
                                        <div class="form-check form-switch text-white">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_add_intercept" disabled>
                                            <label class="form-check-label" for="checkbox_add_intercept">Add intercept to coefficients</label>
                                        </div>
                                        <div id="other_coefficients_parent">
                                            <hr>
                                            <p id="notice_other_coefficients" class="text-white mb-0">No other coefficients found.</p>
                                            <div id="other_coefficients">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-sliders"></i></div> Various</div>
                                    <div class="card-body">
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_show_guidelines" checked>
                                            <label class="form-check-label" for="checkbox_show_guidelines">Show guidelines</label>
                                        </div>
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_show_zero_coefficients" checked>
                                            <label class="form-check-label" for="checkbox_show_zero_coefficients">Show removed coefficients</label>
                                        </div>
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_show_filtered_coefficients" checked>
                                            <label class="form-check-label" for="checkbox_show_filtered_coefficients">Show filtered coefficients</label>
                                        </div>
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_probabilities_mode">
                                            <label class="form-check-label" for="checkbox_p_value_mode">Coefficients as probabilities</label>
                                        </div>
                                        <div class="text-white">
                                            <label for="input_color_palette" class="btn btn-light btn-sm" style="width: 100%;" id="label_color_palette"><div class="wrapper"><i class="bi bi-palette" id="icon_color_palette"></i></div>  Load colour palette</label>
                                            <input accept=".json" class="form-control form-control-sm" type="file" id="input_color_palette" style="display: none;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="pills-coding" role="tabpanel" aria-labelledby="pills-coding-tab" tabindex="0">
                                <div class="card mb-2">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-paint-bucket"></i></div> Colour coding</div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_color_coding" id="radio_color_coding_sign" checked>
                                            <label class="form-check-label" for="radio_color_coding_sign">Positive/negative</label>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <ul class="nav nav-pills justify-content-center flex-column" id="filter-pills-tab" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active" data-bs-toggle="pill" data-bs-target="#pills-filter-none" type="button" role="tab" aria-controls="pills-filter-none" aria-selected="true"><i class="bi bi-slash-lg"></i> No filter</a>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="pills-filter-top-n-tab" data-bs-toggle="pill" data-bs-target="#pills-filter-top-n" type="button" role="tab" aria-controls="pills-filter-top-n" aria-selected="false"><i class="bi bi-align-top"></i> Top n filter</a>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="pills-filter-coefficient-threshold-tab" data-bs-toggle="pill" data-bs-target="#pills-filter-coefficient-threshold" type="button" role="tab" aria-controls="pills-filter-coefficient-threshold" aria-selected="false"><i class="bi bi-funnel"></i> Coefficient threshold filter</a>
                                            </li>
                                        </ul>
                                        
                                        <div class="tab-content" id="filter-pills-tabContent">
                                            <div class="tab-pane active" id="pills-filter-none" role="tabpanel" aria-labelledby="pills-filter-none" tabindex="0"></div>
                                            <div class="tab-pane mt-3" id="pills-filter-top-n" role="tabpanel" aria-labelledby="pills-filter-top-n" tabindex="0">
                                                <div class="form-floating">
                                                    <input id="input_top_n" class="form-control" type="number" value="100" min="0" step="5">
                                                    <label>Cutoff (top n)</label>
                                                </div>
                                            </div>
                                            <div class="tab-pane mt-3" id="pills-filter-coefficient-threshold" role="tabpanel" aria-labelledby="pills-filter-coefficient-threshold" tabindex="0">
                                                <p class="text-white mb-2">Pull effect threshold:</p>
                                                <div class="toolbar pb-3" id="form_pull_effect">
                                                    <div id="pull_effect_display" class="text-white" style="width: 3em; padding-right: 1em;">0</div>
                                                    <div style="width: 100%;">
                                                        <input style="vertical-align: middle; width: 100%;" type="range" class="form-range" id="input_pull_effect" min="0" max="2" step="0.1" value="0" >
                                                    </div>
                                                </div>
                                                <div class="btn-group" role="group" style="width: 100%;">
                                                    <button type="button" class="btn btn-light btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                       <div class="wrapper"><i class="bi bi-list-nested"></i></div> Set to dispersion measure
                                                    </button>
                                                    <ul id="pull_effect_dispersion_dropdown" class="dropdown-menu" style="width: 100%;">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_color_coding" id="radio_color_coding_categorical">
                                            <label class="form-check-label" for="radio_color_coding_categorical">Categorical</label>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <select class="form-select mb-2" aria-label="Dropdown categorical coding selection" id="select_categorical_coding" disabled>
                                        
                                        </select>
                                    </div>
                                    <div class="card-header secondary text-white">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="radio_color_coding" id="radio_color_coding_numeric">
                                            <label class="form-check-label" for="radio_color_coding_numeric">Numeric</label>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <select class="form-select" aria-label="Dropdown numeric coding selection" id="select_numeric_coding" disabled>
                                        
                                        </select>
                                    </div>
                                </div>
                                <div class="card mb-2">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-rulers"></i></div> Size coding</div>
                                    <div class="card-body">
                                        <select class="form-select" aria-label="Dropdown numeric size coding selection" id="select_size_coding" disabled>
                                        
                                        </select>
                                    </div>
                                </div>
                                <div class="card mb-2">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-cursor-text"></i></div> Text coding</div>
                                    <div class="card-body">
                                        <select class="form-select mb-2" aria-label="Dropdown text coding selection" id="select_text_coding" disabled>
                                        
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="pills-selection" role="tabpanel" aria-labelledby="pills-coding-tab" tabindex="0">
                                <div class="card mb-3">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-cursor"></i></div> Data point selection</div>
                                    <div class="card-body">
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_brush_active">
                                            <label class="form-check-label" for="checkbox_brush_active">Brush to select</label>
                                        </div>
                                        <div class="form-check form-switch text-white pb-2">
                                            <input class="form-check-input" type="checkbox" role="switch" id="checkbox_brush_additive" disabled>
                                            <label class="form-check-label" for="checkbox_brush_additive">Additive brushing</label>
                                        </div>
                                        <div class="input-group mb-2">
                                            <div class="form-floating flex-grow-1">
                                                <select class="form-select" aria-label="Dropdown selection ordering" id="select_selection_sort">
                                                </select>
                                                <label for="select_external">Sort by:</label>
                                            </div>
                                            <button class="btn bg-ochre" id="button_selection_sort">
                                                <i id="button_selection_sort_icon" class="bi bi-sort-up"></i>
                                            </button>
                                        </div>
                                        <div class="btn-group pb-2" role="group" style="width: 100%;">
                                            <button type="button" class="btn btn-light btn-sm" id="button_clear_selection">
                                                <div class="wrapper"><i class="bi bi-x-lg"></i></div> Clear selection
                                            </button>
                                        </div>
                                        <div class="btn-group" role="group" style="width: 100%;">
                                            <button type="button" class="btn btn-light btn-sm" id="button_download_selection">
                                                <div class="wrapper"><i class="bi bi-download"></i></div> Download selection
                                            </button>
                                        </div>
                                        <hr class="mb-1">
                                        <table class="table table-striped-columns text-white" id="table_selection_stats">
                                        </table>
                                        <p class="text-white text-center pb-0 mb-0"><span id="span_selection_count">0</span> features selected</p>
                                        <p class="text-white text-center pb-0 mb-0">(<span id="span_selection_filter_count">0</span> after filtering)</p>
                                    </div>
                                </div>
                                <div id="selection_info_pane"></div>
                            </div>
                            <div class="tab-pane" id="pills-info" role="tabpanel" aria-labelledby="pills-info-tab" tabindex="0">
                                <div class="card mb-3">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-info-circle"></i></div> Meta information</div>
                                    <div class="card-body text-white">
                                        <div class="text-white">
                                            <label for="input_model_info" class="btn btn-light btn-sm" style="width: 100%;" id="label_model_info"><div class="wrapper"><i class="bi bi-upload" id="icon_color_palette"></i></div>  Load meta information</label>
                                            <input accept=".csv" class="form-control form-control-sm" type="file" id="input_model_info" style="display: none;">
                                        </div>
                                    </div>
                                </div>
                                <div class="card mb-3">
                                    <div class="card-header text-white">
                                        <div class="wrapper"><i class="bi bi-boxes"></i></div> Model information</div>
                                    <div class="card-body text-white">
                                        <p class="mb-0" id="notice_model_info">Load a meta information file to see model info.</p>
                                        <table class="table table-striped-columns text-white d-none" id="table_model_info">
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-white">
                        <hr>
                        <span href="#" class="d-flex align-items-center text-white text-decoration-none">
                            <img src="https://github.com/AntheSevenants.png" alt="" width="32" height="32" class="rounded-circle me-2">
                            <strong>by Anthe Sevenants</strong>
                        </span>
                    </div>
                </div>
                <div class="flex-grow-1 scrollable">
                    <div class="container d-flex justify-content-center align-items-center pt-4" style="min-height: 100vh;">
                        <div id="section_fileUpload" class="section row justify-content-center pb-5">
                            <div class="col-12 col-lg-5">
                                <label for="input_dataset" class="form-label">Choose a dataset to visualise:</label>
                                <input class="form-control" type="file" id="input_dataset">
                                <p class="pt-2 text-secondary">Your dataset will be processed locally. No data will leave your computer.</p>
                                <div class="grid text-center">
                                    <button type="button" class="btn btn-light" id="button_load_sample">Load sample dataset</button>
                                </div>
                            </div>
                        </div>
                        <div class="plot hidden" id="dotplot">
                        </div>
                    </div>
                </div>
            </main>

            <!-- Main script -->
            <script>
                rekker = new Rekker();
            </script>
        </body>
    </html>